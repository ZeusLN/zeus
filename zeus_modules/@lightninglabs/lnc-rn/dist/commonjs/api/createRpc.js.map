{"version":3,"names":["capitalize","s","toUpperCase","slice","createRpc","packageName","lnc","rpc","Proxy","get","target","key","c","methodName","toString","method","subscriptionMethods","includes","request","subscribe"],"sources":["createRpc.ts"],"sourcesContent":["import LNC from '../lnc';\nimport { subscriptionMethods } from '@lightninglabs/lnc-core';\n\n// capitalize the first letter in the string\nconst capitalize = (s: string) => s && s[0].toUpperCase() + s.slice(1);\n\n/**\n * Creates a typed Proxy object which calls the request or subscribe\n * methods depending on which function is called on the object\n */\nexport function createRpc<T extends object>(packageName: string, lnc: LNC): T {\n    const rpc = {};\n    return new Proxy(rpc, {\n        get(target, key, c) {\n            const methodName = capitalize(key.toString());\n            // the full name of the method (ex: lnrpc.Lightning.OpenChannel)\n            const method = `${packageName}.${methodName}`;\n\n            if (subscriptionMethods.includes(method)) {\n                // call subscribe for streaming methods\n                return (request: object): string => {\n                    return lnc.subscribe(method, request);\n                };\n            } else {\n                // call request for unary methods\n                return async (request: object): Promise<any> => {\n                    return await lnc.request(method, request);\n                };\n            }\n        }\n    }) as T;\n}\n\nexport default createRpc;\n"],"mappings":";;;;;;;AACA;AAEA;AACA,MAAMA,UAAU,GAAIC,CAAS,IAAKA,CAAC,IAAIA,CAAC,CAAC,CAAC,CAAC,CAACC,WAAW,EAAE,GAAGD,CAAC,CAACE,KAAK,CAAC,CAAC,CAAC;;AAEtE;AACA;AACA;AACA;AACO,SAASC,SAAS,CAAmBC,WAAmB,EAAEC,GAAQ,EAAK;EAC1E,MAAMC,GAAG,GAAG,CAAC,CAAC;EACd,OAAO,IAAIC,KAAK,CAACD,GAAG,EAAE;IAClBE,GAAG,CAACC,MAAM,EAAEC,GAAG,EAAEC,CAAC,EAAE;MAChB,MAAMC,UAAU,GAAGb,UAAU,CAACW,GAAG,CAACG,QAAQ,EAAE,CAAC;MAC7C;MACA,MAAMC,MAAM,GAAI,GAAEV,WAAY,IAAGQ,UAAW,EAAC;MAE7C,IAAIG,4BAAmB,CAACC,QAAQ,CAACF,MAAM,CAAC,EAAE;QACtC;QACA,OAAQG,OAAe,IAAa;UAChC,OAAOZ,GAAG,CAACa,SAAS,CAACJ,MAAM,EAAEG,OAAO,CAAC;QACzC,CAAC;MACL,CAAC,MAAM;QACH;QACA,OAAO,MAAOA,OAAe,IAAmB;UAC5C,OAAO,MAAMZ,GAAG,CAACY,OAAO,CAACH,MAAM,EAAEG,OAAO,CAAC;QAC7C,CAAC;MACL;IACJ;EACJ,CAAC,CAAC;AACN;AAAC,eAEcd,SAAS;AAAA"}