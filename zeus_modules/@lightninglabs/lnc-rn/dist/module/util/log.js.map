{"version":3,"names":["debug","LogLevel","Logger","constructor","levelToOutput","namespace","message","args","_log","info","warn","error","_levelToOutput","_logger","fromEnv","level","none","prefix","Object","keys","reduce","prev","curr","log","grpcLog","actionLog"],"sources":["log.ts"],"sourcesContent":["import debug, { Debugger } from 'debug';\n\nexport enum LogLevel {\n    debug = 1,\n    info = 2,\n    warn = 3,\n    error = 4,\n    none = 5\n}\n\n/**\n * A logger class with support for multiple namespaces and log levels.\n */\nexport class Logger {\n    private _levelToOutput: LogLevel;\n    private _logger: Debugger;\n\n    constructor(levelToOutput: LogLevel, namespace: string) {\n        this._levelToOutput = levelToOutput;\n        this._logger = debug(namespace);\n    }\n\n    /**\n     * creates a new Logger instance by inspecting the executing environment\n     */\n    static fromEnv(namespace: string): Logger {\n        // by default, log nothing (assuming prod)\n        const level = LogLevel.none;\n        return new Logger(level, namespace);\n    }\n\n    /**\n     * log a debug message\n     */\n    debug = (message: string, ...args: any[]) =>\n        this._log(LogLevel.debug, message, args);\n\n    /**\n     * log an info message\n     */\n    info = (message: string, ...args: any[]) =>\n        this._log(LogLevel.info, message, args);\n\n    /**\n     * log a warn message\n     */\n    warn = (message: string, ...args: any[]) =>\n        this._log(LogLevel.warn, message, args);\n\n    /**\n     * log an error message\n     */\n    error = (message: string, ...args: any[]) =>\n        this._log(LogLevel.error, message, args);\n\n    /**\n     * A shared logging function which will only output logs based on the level of this Logger instance\n     * @param level the level of the message being logged\n     * @param message the message to log\n     * @param args optional additional arguments to log\n     */\n    private _log(level: LogLevel, message: string, args: any[]) {\n        // don't log if the level to output is greater than the level of this message\n        if (this._levelToOutput > level) return;\n\n        // convert the provided log level number to the string name\n        const prefix = Object.keys(LogLevel).reduce(\n            (prev, curr) =>\n                level === LogLevel[curr as keyof typeof LogLevel] ? curr : prev,\n            '??'\n        );\n\n        this._logger(`[${prefix}] ${message}`, ...args);\n    }\n}\n\n/**\n * the main logger for the app\n */\nexport const log = Logger.fromEnv('main');\n\n/**\n * the logger for GRPC requests and responses\n */\nexport const grpcLog = Logger.fromEnv('grpc');\n\n/**\n * the logger for state updates via mobx actions\n */\nexport const actionLog = Logger.fromEnv('action');\n"],"mappings":";;;AAAA,OAAOA,KAAK,MAAoB,OAAO;AAEvC,WAAYC,QAAQ;;AAQpB;AACA;AACA;AAFA,WARYA,QAAQ;EAARA,QAAQ,CAARA,QAAQ;EAARA,QAAQ,CAARA,QAAQ;EAARA,QAAQ,CAARA,QAAQ;EAARA,QAAQ,CAARA,QAAQ;EAARA,QAAQ,CAARA,QAAQ;AAAA,GAARA,QAAQ,KAARA,QAAQ;AAWpB,OAAO,MAAMC,MAAM,CAAC;EAIhBC,WAAW,CAACC,aAAuB,EAAEC,SAAiB,EAAE;IAAA;IAAA;IAAA;IAAA,+BAiBhD,UAACC,OAAe;MAAA,kCAAKC,IAAI;QAAJA,IAAI;MAAA;MAAA,OAC7B,KAAI,CAACC,IAAI,CAACP,QAAQ,CAACD,KAAK,EAAEM,OAAO,EAAEC,IAAI,CAAC;IAAA;IAAA,8BAKrC,UAACD,OAAe;MAAA,mCAAKC,IAAI;QAAJA,IAAI;MAAA;MAAA,OAC5B,KAAI,CAACC,IAAI,CAACP,QAAQ,CAACQ,IAAI,EAAEH,OAAO,EAAEC,IAAI,CAAC;IAAA;IAAA,8BAKpC,UAACD,OAAe;MAAA,mCAAKC,IAAI;QAAJA,IAAI;MAAA;MAAA,OAC5B,KAAI,CAACC,IAAI,CAACP,QAAQ,CAACS,IAAI,EAAEJ,OAAO,EAAEC,IAAI,CAAC;IAAA;IAAA,+BAKnC,UAACD,OAAe;MAAA,mCAAKC,IAAI;QAAJA,IAAI;MAAA;MAAA,OAC7B,KAAI,CAACC,IAAI,CAACP,QAAQ,CAACU,KAAK,EAAEL,OAAO,EAAEC,IAAI,CAAC;IAAA;IAnCxC,IAAI,CAACK,cAAc,GAAGR,aAAa;IACnC,IAAI,CAACS,OAAO,GAAGb,KAAK,CAACK,SAAS,CAAC;EACnC;;EAEA;AACJ;AACA;EACI,OAAOS,OAAO,CAACT,SAAiB,EAAU;IACtC;IACA,MAAMU,KAAK,GAAGd,QAAQ,CAACe,IAAI;IAC3B,OAAO,IAAId,MAAM,CAACa,KAAK,EAAEV,SAAS,CAAC;EACvC;;EAEA;AACJ;AACA;;EAsBI;AACJ;AACA;AACA;AACA;AACA;EACYG,IAAI,CAACO,KAAe,EAAET,OAAe,EAAEC,IAAW,EAAE;IACxD;IACA,IAAI,IAAI,CAACK,cAAc,GAAGG,KAAK,EAAE;;IAEjC;IACA,MAAME,MAAM,GAAGC,MAAM,CAACC,IAAI,CAAClB,QAAQ,CAAC,CAACmB,MAAM,CACvC,CAACC,IAAI,EAAEC,IAAI,KACPP,KAAK,KAAKd,QAAQ,CAACqB,IAAI,CAA0B,GAAGA,IAAI,GAAGD,IAAI,EACnE,IAAI,CACP;IAED,IAAI,CAACR,OAAO,CAAE,IAAGI,MAAO,KAAIX,OAAQ,EAAC,EAAE,GAAGC,IAAI,CAAC;EACnD;AACJ;;AAEA;AACA;AACA;AACA,OAAO,MAAMgB,GAAG,GAAGrB,MAAM,CAACY,OAAO,CAAC,MAAM,CAAC;;AAEzC;AACA;AACA;AACA,OAAO,MAAMU,OAAO,GAAGtB,MAAM,CAACY,OAAO,CAAC,MAAM,CAAC;;AAE7C;AACA;AACA;AACA,OAAO,MAAMW,SAAS,GAAGvB,MAAM,CAACY,OAAO,CAAC,QAAQ,CAAC"}